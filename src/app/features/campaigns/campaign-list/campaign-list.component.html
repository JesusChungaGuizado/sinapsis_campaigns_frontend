<div class="p-6">
    <div class="p-6 bg-gray-50 mb-3 rounded-md">
        <h1 class="text-3xl font-bold mb-4">Campañas</h1>
        <p class="text-gray-700">Bienvenido al panel de administración</p>
        <div class="flex justify-between items-center mt-6">
            <form [formGroup]="form" class="flex space-x-2">
                <input type="date" formControlName="startDate" class="border p-2 rounded" />
                <input type="date" formControlName="endDate" class="border p-2 rounded">
                <button (click)="loadCampaigns()"
                    class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-400">Filtrar</button>
            </form>
            <a routerLink="/campaigns/create"
                class="nline-block px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-400">+ Agregar
            </a>
        </div>
    </div>
    @if (processCampaignAlert.visible) {
    <app-alert message="{{processCampaignAlert.message}}" type="success"
        (close)="processCampaignAlert.visible = false" />
    }
    <table class="w-full border-collapse border border-gray-200 mt-2">
        <thead>
            <tr class="bg-gray-100">
                <th class="border p-2">ID</th>
                <th class="border p-2">Nombre</th>
                <th class="border p-2">Mensaje</th>
                <th class="border p-2">Estado</th>
                <th class="border p-2">Acciones</th>
            </tr>
        </thead>
        <tbody>
            @for (campaign of campaigns; track $index) {
            <tr class="hover:bg-gray-50">
                <td class="border p-2">{{campaign.id}}</td>
                <td class="border p-2">{{campaign.name}}</td>
                <td class="border p-2">{{campaign.message_text}}</td>
                <td class="border p-2">{{campaign.process_status | campaignStatus}}</td>
                <td class="border p-2 flex gap-2">
                    <button class="px-4 py-2 bg-green-400 hover:bg-green-500 text-white rounded-lg"
                        (click)="openModalCampaign(campaign.id!)">
                        Ver
                    </button>
                    <button class="px-4 py-2 bg-slate-400 hover:bg-slate-500 text-white rounded-lg"
                        (click)="processCampaign(campaign.id!)">
                        Procesar
                    </button>
                </td>
            </tr>
            }
        </tbody>
    </table>

    <app-modal [open]="openModal" title="Detalle lista de mensajes de Campaña" (close)="openModal = false">
        <app-message-list [campaignId]="campaignId"></app-message-list>
    </app-modal>
</div>